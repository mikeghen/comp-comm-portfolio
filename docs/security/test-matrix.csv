item_type,item_name,description,test_references
flow,Message payment,"Payer signs EIP-712 message, pays 10 USDC, receives MT; dev share minted",contracts/test/MessageManager.t.sol::PayForMessageWithSig::test_PaysWithValidSignature_FromPayerDirectly;contracts/test/MessageManager.t.sol::PayForMessageWithSig::test_PaysWithValidSignature_ViaRelayer
flow,Policy edit,"Editor replaces prompt slice after paying proportional USDC fee",contracts/test/PolicyManager.t.sol::EditPrompt::testFuzz_EditsPromptWithValidRange;contracts/test/PolicyManager.t.sol::EditPrompt::testFuzz_AppliesEditCorrectly
flow,Vault active management,"Owner/agent swaps assets and supplies to Compound markets under allowlists",contracts/test/VaultManager.t.sol::SwapExactInputV3::test_SwapsInLockedPhase;contracts/test/VaultManager.t.sol::Supply::test_DepositsAssetToComet;contracts/test/integration/Compound.t.sol::SupplyWithdrawUSDC::testFork_Supply_USDC
flow,MT redemption,"Holder burns MT for WETH after consolidation and unlock",contracts/test/VaultManager.t.sol::RedeemWETH::test_RedeemsProRataWETHInRedemptionPhase;contracts/test/integration/Lifecycle.t.sol::testFork_FullLifecycle_USDC_to_AERO_Comet_to_WETH_and_Redeem
invariant,Replay protected digests,"Digest cannot be reused even with different signature encoding",contracts/test/MessageManager.t.sol::PayForMessageWithSig::test_RevertIf_ReplayedSameDigestWithDifferentSignatureEncodings
invariant,Prompt edit length match,"Replacement length must equal edited range",contracts/test/PolicyManager.t.sol::EditPrompt::testFuzz_RevertIf_InvalidReplacementLength
invariant,Vault asset allowlist,"Swaps/supply restricted to allowed assets & comets",contracts/test/VaultManager.t.sol::SwapExactInputV3::testFuzz_RevertIf_TokenNotAllowed;contracts/test/VaultManager.t.sol::Supply::testFuzz_RevertIf_AssetNotAllowed
invariant,Redemption phase gating,"redeemWETH only callable after consolidation in redemption phase",contracts/test/VaultManager.t.sol::RedeemWETH::test_RevertIf_NotInRedemptionPhase;contracts/test/integration/Lifecycle.t.sol::testFork_FullLifecycle_USDC_to_AERO_Comet_to_WETH_and_Redeem
